# 批量音乐生成计划 🎵

## 📊 当前状态

### 第一批：95首歌曲（正在进行中）
- **进度**: 64/95 (67.4%)
- **进程ID**: 12985
- **日志文件**: `generation.log`
- **参数**:
  - 推理步数: 50
  - 音频时长: 180秒 (3分钟)
  - 音色: 女声
- **预计完成时间**: 约10分钟后
- **预计总时间**: 约30分钟

### 第二批：300首高质量歌曲（等待启动）
- **启动方式**: 自动（在第一批完成后自动启动）
- **监控进程**: 14253
- **日志文件**: `generation_300.log`
- **进度文件**: `output/progress_hq_300.json`
- **参数**:
  - 推理步数: **60** (更高)
  - 音频时长: **120秒** (2分钟，平衡质量和时间)
  - 音色: 女声
  - 质量: **高保真**
- **预计时间**: 约100分钟
- **歌曲主题**:
  - 1-100: 情感与人生 (爱情、梦想、成长)
  - 101-200: 自然与风景 (春夏秋冬、山水风光)
  - 201-300: 故事与情感 (古典、传统、世界音乐)

## 🎯 生成策略

### 高质量参数说明
```javascript
{
  infer_step: 60,        // 推理步数提高20%，音质更好
  audio_duration: 120,   // 2分钟，平衡质量和时间
  guidance_scale: 15.0,  // 引导强度
  scheduler_type: 'euler',
  cfg_type: 'apg',
  use_erg_tag: true,
  use_erg_lyric: true,
  use_erg_diffusion: true
}
```

### 300首歌曲主题分类

#### 💕 1-100: 情感与人生
- 爱情主题：初见心动、甜蜜相恋、深切思念、幸福时刻
- 成长主题：梦想启航、勇敢前行、坚持不懈、成长之路
- 人生主题：心灵归宿、内心宁静、禅意人生、生命礼赞

#### 🌿 101-200: 自然与风景
- 四季：春暖花开、夏日清风、秋叶飘零、冬日暖阳
- 时间：晨曦微光、夕阳西下、星空璀璨、明月高悬
- 地理：流水潺潺、山峦叠翠、海浪轻拍、森林低语
- 世界：城市灯火、乡村傍晚、沙漠孤烟、极光之美

#### 🎭 201-300: 故事与情感
- 古典：梅花三弄、高山流水、春江花月夜、平沙落雁
- 民歌：茉莉花、彩云追月、雨打芭蕉、渔舟唱晚
- 世界：巴黎夜色、维也纳之舞、威尼斯水乡、爱琴海
- 自然：亚马逊雨林、大堡礁、极地冰川、火山喷发

## 📁 文件组织

### 输出目录结构
```
output/
├── 第一批（95首）
│   ├── 初次相遇.wav
│   ├── 母爱.wav
│   ├── 追逐梦想.wav
│   └── ...
├── 第二批（300首）- 高质量
│   ├── HQ_初见心动.wav
│   ├── HQ_甜蜜相恋.wav
│   ├── HQ_春暖花开.wav
│   └── ...
├── 进度文件
│   ├── progress.json (第一批)
│   ├── progress_hq_300.json (第二批)
│   ├── final_report.json (第一批完成报告)
│   └── final_report_hq_300.json (第二批完成报告)
└── 歌曲数据
    ├── song_1_*.json
    ├── hq_song_1_*.json
    └── ...
```

## 🔍 监控命令

### 查看当前进度（第一批）
```bash
# 实时日志
tail -f generation.log

# 查看进度JSON
cat output/progress.json | jq

# 查看已完成数量
ls -1 output/*.wav | wc -l
```

### 查看第二批进度（启动后）
```bash
# 实时日志
tail -f generation_300.log

# 查看进度JSON
cat output/progress_hq_300.json | jq

# 查看已完成数量
ls -1 output/HQ_*.wav | wc -l
```

### 查看监控脚本状态
```bash
# 查看监控日志
tail -f monitor.log

# 检查进程是否运行
ps -p 14253
```

## 📊 预计时间线

### 第一批（95首）
- **开始时间**: 2/5/2026 9:58 PM
- **当前进度**: 67.4% (64/95)
- **剩余时间**: ~10分钟
- **预计完成**: 2/5/2026 10:30 PM

### 第二批（300首）
- **启动时间**: 第一批完成后自动启动
- **预计开始**: 2/5/2026 10:30 PM
- **预计完成**: 2/6/2026 12:10 AM
- **总耗时**: ~100分钟

## ⚙️ 技术细节

### API调用频率
- 第一批: 每首间隔1秒
- 第二批: 每首间隔2秒（避免API限流）

### 错误处理
- 每首歌曲失败后自动重试3次
- 重试间隔: 5秒
- 失败记录保存在JSON中

### 质量对比
| 参数 | 第一批 | 第二批 (高质量) |
|------|--------|-----------------|
| 推理步数 | 50 | **60** (+20%) |
| 音频时长 | 180s | 120s (平衡) |
| 文件前缀 | 无 | `HQ_` |
| 歌曲数量 | 95 | **300** |

## 📝 完成后操作

### 1. 查看最终报告
```bash
cat output/final_report.json | jq '.summary'
cat output/final_report_hq_300.json | jq '.summary'
```

### 2. 批量下载
所有歌曲可直接通过URL下载：
```bash
# 第一批
cat output/playlist.json | jq -r '.[].url' | wget -i -

# 第二批
cat output/playlist_hq_300.json | jq -r '.[].url' | wget -i -
```

### 3. 提交到GitHub
```bash
git add .
git commit -m "feat: 添加395首高质量钢琴抒情曲"
git push
```

## 🎉 预期成果

完成后将拥有：
- ✅ 395首高质量钢琴抒情曲
- ✅ 女声演唱
- ✅ 完整的歌词和元数据
- ✅ 多样化的主题和风格
- ✅ 可直接用于商业项目

---

**总生成时间**: 约130分钟（2小时10分钟）
**总歌曲数量**: 395首
**平均质量**: 高保真（infer_step: 60）
